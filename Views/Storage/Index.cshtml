@model AzureStorageDemo.Models.StorageIndexViewModel
@{
    ViewData["Title"] = "Azure Storage Demo";
}

<h2>Azure Storage Demo (Tables, Blobs, Queues, Files)</h2>
<p>Use the simple forms below to add data and upload files. Refresh will show updated lists.</p>

<hr />
<h3>1) Azure Tables — Customers</h3>
<form asp-action="AddCustomer" method="post" class="row g-2">
    <div class="col-md-3"><input name="firstName" class="form-control" placeholder="First name" required /></div>
    <div class="col-md-3"><input name="lastName" class="form-control" placeholder="Last name" required /></div>
    <div class="col-md-4"><input name="email" type="email" class="form-control" placeholder="Email" required /></div>
    <div class="col-md-2"><button class="btn btn-primary w-100">Add Customer</button></div>
</form>

<table class="table table-sm table-striped mt-3">
    <thead><tr><th>Name</th><th>Email</th><th>Created</th></tr></thead>
    <tbody>
        @foreach (var c in Model.Customers)
        {
            <tr><td>@(c.FirstName) @(c.LastName)</td><td>@c.Email</td><td>@c.CreatedOn</td></tr>
        }
    </tbody>
</table>

<hr />
<h3>2) Azure Tables — Products</h3>
<form asp-action="AddProduct" method="post" class="row g-2">
    <div class="col-md-3"><input name="name" class="form-control" placeholder="Name" required /></div>
    <div class="col-md-5"><input name="description" class="form-control" placeholder="Description" /></div>
    <div class="col-md-2"><input name="price" class="form-control" placeholder="Price (e.g. 1999.00)" required /></div>
    <div class="col-md-2"><button class="btn btn-primary w-100">Add Product</button></div>
</form>

<table class="table table-sm table-striped mt-3">
    <thead><tr><th>Name</th><th>Description</th><th>Price</th><th>Created</th></tr></thead>
    <tbody>
        @foreach (var p in Model.Products)
        {
            <tr><td>@p.Name</td><td>@p.Description</td><td>@p.Price</td><td>@p.CreatedOn</td></tr>
        }
    </tbody>
</table>

<hr />
<h3>3) Azure Blobs — Upload Media</h3>
<form asp-action="UploadMedia" method="post" enctype="multipart/form-data" class="row g-2">
    <div class="col-md-8"><input type="file" name="file" class="form-control" required /></div>
    <div class="col-md-4"><button class="btn btn-primary w-100">Upload</button></div>
</form>
<div class="row mt-3">
    @foreach (var url in Model.BlobUrls)
    {
        <div class="col-md-3 mb-3">
            <img src="@url" alt="img" class="img-fluid img-thumbnail" />
            <small class="d-block text-truncate">@url</small>
        </div>
    }
</div>

<hr />
<h3>4) Azure Queues — Send Message</h3>
<form asp-action="SendQueueMessage" method="post" class="row g-2">
    <div class="col-md-3"><input name="type" class="form-control" placeholder="Type (e.g. Processing order)" required /></div>
    <div class="col-md-7"><input name="detail" class="form-control" placeholder="Detail (e.g. ImageName: phone.png)" required /></div>
    <div class="col-md-2"><button class="btn btn-primary w-100">Send</button></div>
</form>
<p class="text-muted mt-1">Tip: Messages are visible in the Storage Account → Queues → <b>orders</b>.</p>

<hr />
<h3>5) Azure Files — Upload Contracts & Download</h3>
<form asp-action="UploadContract" method="post" enctype="multipart/form-data" class="row g-2">
    <div class="col-md-8"><input type="file" name="file" class="form-control" required /></div>
    <div class="col-md-4"><button class="btn btn-primary w-100">Upload Contract</button></div>
</form>

<table class="table table-sm table-striped mt-3">
    <thead><tr><th>Contract File</th><th>Download</th></tr></thead>
    <tbody>
        @foreach (var f in Model.Contracts)
        {
            <tr>
                <td>@f</td>
                <td><a class="btn btn-outline-secondary btn-sm" asp-action="DownloadContract" asp-route-name="@f">Download</a></td>
            </tr>
        }
    </tbody>
</table>

